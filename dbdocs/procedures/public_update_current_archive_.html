---
name: public_update_current_archive_
title: DB Docs | procedures | public_update_current_archive_
date: 2020/02/15
parent: procedures
layout: dbdocs
---

<HTML>
<Header>
  <Title>update_current_archive() - Procedure</Title>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  <Link href="../css/doc.css" rel="stylesheet" type="text/css">
</Header>

<Body>
  
  <table class="flat table table-hover">
    <tr class="banner">
      <td class="title_nm">update_current_archive()</td>
      <td class="watermark_right">(Procedure)</td>
    </tr>
    <tr>
      <td class="key">Name</td>
      <td class="value">update_current_archive()</td>
    </tr>
    <tr>
      <td class="key">Comment</td>
      <td class="value"> </td>
    </tr>
    <tr>
      <td class="key">Src</td>
      <td class="value">
        <pre>CREATE OR REPLACE FUNCTION update_current_archive() 
  RETURNS smallint AS 
$$

DECLARE r RECORD;
BEGIN 	
	FOR r IN select * from peng_org where sesar_name in (select distinct current_archive from sample) LOOP
	update sample set current_archive = r.org_name where sample.current_archive = r.sesar_name;	
    END LOOP;
    return 1;
 end;
$$
  LANGUAGE plpgsql VOLATILE 
  COST 100;</pre>
      </td>
    </tr>
  </table>
</Body>

</HTML>