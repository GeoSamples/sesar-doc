---
name: public_sesar_fixpoly_geometry_
title: DB Docs | procedures | public_sesar_fixpoly_geometry_
date: 2020/02/15
parent: procedures
layout: dbdocs
---

<HTML>
<Header>
	<Title>sesar_fixpoly(geometry) - Procedure</Title>
	<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
	<Link href="../css/doc.css" rel="stylesheet" type="text/css">
</Header>

<Body>
	<table class="flat table table-hover">
		<tr class="banner">
			<td class="title_nm">sesar_fixpoly(geometry)</td>
			<td class="watermark_right">(Procedure)</td>
		</tr>
		<tr>
			<td class="key">Name</td>
			<td class="value">sesar_fixpoly(geometry)</td>
		</tr>
		<tr>
			<td class="key">Comment</td>
			<td class="value"> </td>
		</tr>
		<tr>
			<td class="key">Src</td>
			<td class="value">
				<pre>CREATE OR REPLACE FUNCTION sesar_fixpoly(geometry) 
  RETURNS character varying AS 
$$


SELECT CASE WHEN
	( st_xmax( $1::geometry ) - st_xmin( $1::geometry ) ) &gt; ( st_xmax( st_shift_longitude( $1::geometry ) ) - st_xmin( st_shift_longitude( $1::geometry ) ) )
THEN
	st_astext(
	st_union(
	st_intersection(st_shift_longitude($1::geometry),'POLYGON((179.99999 -89.9999,179.99999 89.9999,0.00001 89.9999,0.00001 -89.9999,179.99999 -89.9999))'::geometry),
	st_translate(
		st_intersection(st_shift_longitude($1::geometry),'POLYGON((180.00001 -89.9999,180.00001 89.9999,359.99999 89.9999,359.99999 -89.9999,180.00001 -89.9999))'::geometry),
	-360,0
	))
	)
ELSE
	st_astext($1::geometry)
END;


$$
  LANGUAGE sql VOLATILE 
  COST 100;</pre>
			</td>
		</tr>
	</table>
</Body>

</HTML>